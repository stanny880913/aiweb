{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, vShow as _vShow, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"div\", {\n  id: \"title\"\n}, [/*#__PURE__*/_createElementVNode(\"h1\", null, \"義大胸腔科\")], -1 /* HOISTED */);\nconst _hoisted_2 = {\n  id: \"demo\"\n};\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */);\nconst _hoisted_4 = {\n  id: \"look\"\n};\nconst _hoisted_5 = [\"src\"];\nconst _hoisted_6 = {\n  id: \"look_event\"\n};\nconst _hoisted_7 = [\"onClick\"];\nconst _hoisted_8 = [\"onClick\"];\nconst _hoisted_9 = {\n  id: \"preview_close\"\n};\nconst _hoisted_10 = /*#__PURE__*/_createElementVNode(\"img\", {\n  src: \"https://s1.ax1x.com/2022/08/08/vMEBqI.png\",\n  alt: \"\",\n  title: \"上一张\"\n}, null, -1 /* HOISTED */);\nconst _hoisted_11 = [_hoisted_10];\nconst _hoisted_12 = /*#__PURE__*/_createElementVNode(\"img\", {\n  src: \"https://s1.ax1x.com/2022/08/08/vMErZt.png\",\n  alt: \"\",\n  title: \"下一张\"\n}, null, -1 /* HOISTED */);\nconst _hoisted_13 = [_hoisted_12];\nconst _hoisted_14 = [\"src\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createCommentVNode(\" 上传后显示 \"), _hoisted_1, _createCommentVNode(\" 上传图片按钮 \"), _withDirectives(_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"input\", {\n    type: \"file\",\n    id: \"demo_file\",\n    accept: \"image/*\",\n    multiple: \"\",\n    onChange: _cache[0] || (_cache[0] = $event => $setup.update($event))\n  }, null, 32 /* HYDRATE_EVENTS */), _createTextVNode(\" DRAG & DROP \"), _hoisted_3, _createTextVNode(\" KKKgfdrhtgyrasdasdsadsadas \")], 512 /* NEED_PATCH */), [[_vShow, $setup.uploadnum]]), _createElementVNode(\"div\", _hoisted_4, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.imgSrc, (item, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      id: \"look_img\",\n      key: index\n    }, [_createElementVNode(\"img\", {\n      src: item,\n      alt: \"\"\n    }, null, 8 /* PROPS */, _hoisted_5), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"img\", {\n      src: \"https://s1.ax1x.com/2022/08/08/vMEtPO.png\",\n      alt: \"\",\n      title: \"点击查看\",\n      onClick: $event => $setup.look(index)\n    }, null, 8 /* PROPS */, _hoisted_7), _createElementVNode(\"img\", {\n      src: \"https://s1.ax1x.com/2022/08/08/vMEaxH.png\",\n      alt: \"\",\n      title: \"点击删除\",\n      onClick: $event => $setup.deletes(index)\n    }, null, 8 /* PROPS */, _hoisted_8)])]);\n  }), 128 /* KEYED_FRAGMENT */))]), _createCommentVNode(\" 图片预览 \"), $setup.show ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 0,\n    id: \"preview\",\n    onClick: _cache[4] || (_cache[4] = () => {\n      $setup.show = false;\n    })\n  }, [_createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"img\", {\n    src: \"https://s1.ax1x.com/2022/08/08/vMEURe.png\",\n    alt: \"\",\n    title: \"关闭\",\n    onClick: _cache[1] || (_cache[1] = () => {\n      $setup.show = false;\n    })\n  })]), $setup.pvwWhere != 0 ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 0,\n    id: \"preview_last\",\n    onClick: _cache[2] || (_cache[2] = _withModifiers($event => $setup.previewLast(), [\"stop\"]))\n  }, _hoisted_11)) : _createCommentVNode(\"v-if\", true), $setup.pvwWhere != $setup.imgSrc.length - 1 ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 1,\n    id: \"preview_next\",\n    onClick: _cache[3] || (_cache[3] = _withModifiers($event => $setup.previewNext(), [\"stop\"]))\n  }, _hoisted_13)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"img\", {\n    src: $setup.pvwSrc,\n    alt: \"\"\n  }, null, 8 /* PROPS */, _hoisted_14)])) : _createCommentVNode(\"v-if\", true)], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"mappings":";gCAEEA,oBAEM;EAFDC,EAAE,EAAC;AAAO,iBACbD,oBAAc,YAAV,OAAK;;EAGNC,EAAE,EAAC;AAAM;gCAEAD,oBAAM;;EAGfC,EAAE,EAAC;AAAM;;;EAGLA,EAAE,EAAC;AAAY;;;;EAajBA,EAAE,EAAC;AAAe;iCAQrBD,oBAA0E;EAArEE,GAAG,EAAC,2CAA2C;EAACC,GAAG,EAAC,EAAE;EAACC,KAAK,EAAC;;qBAAlEC,WAA0E;iCAG1EL,oBAA0E;EAArEE,GAAG,EAAC,2CAA2C;EAACC,GAAG,EAAC,EAAE;EAACC,KAAK,EAAC;;qBAAlEE,WAA0E;;;6DArC9EC,8BAAc,EACdC,UAEM,EACND,+BAAe,kBACfP,oBAIM,OAJNS,UAIM,GAHJT,oBAAuF;IAAhFU,IAAI,EAAC,MAAM;IAACT,EAAE,EAAC,WAAW;IAACU,MAAM,EAAC,SAAS;IAACC,QAAQ,EAAR,EAAQ;IAAEC,QAAM,sCAAEC,aAAM,CAACC,MAAM;sDAAK,eAC3E,aAAM,iDAEpB,qCAJuBD,gBAAS,KAKhCd,oBAQM,OARNgB,UAQM,sBAPJC,oBAMMC,6BANqCJ,aAAM,GAAtBK,IAAI,EAAEC,KAAK;yBAAtCH,oBAMM;MANDhB,EAAE,EAAC,UAAU;MAAkCoB,GAAG,EAAED;QACvDpB,oBAA0B;MAApBE,GAAG,EAAEiB,IAAI;MAAEhB,GAAG,EAAC;yCACrBH,oBAGM,OAHNsB,UAGM,GAFJtB,oBAAgG;MAA3FE,GAAG,EAAC,2CAA2C;MAACC,GAAG,EAAC,EAAE;MAACC,KAAK,EAAC,MAAM;MAAEmB,OAAK,YAAET,WAAI,CAACM,KAAK;yCAC3FpB,oBAAmG;MAA9FE,GAAG,EAAC,2CAA2C;MAACC,GAAG,EAAC,EAAE;MAACC,KAAK,EAAC,MAAM;MAAEmB,OAAK,YAAET,cAAO,CAACM,KAAK;;oCAKpGb,6BAAa,EACWO,WAAI,kBAA5BG,oBAmBM;;IAnBDhB,EAAE,EAAC,SAAS;IAAcsB,OAAK;MAAqBT,WAAI;;MAK3Dd,oBAMM,OANNwB,UAMM,GALJxB,oBAII;IAJCE,GAAG,EAAC,2CAA2C;IAACC,GAAG,EAAC,EAAE;IAACC,KAAK,EAAC,IAAI;IAAEmB,OAAK;MAA6BT,WAAI;;QAMnFA,eAAQ,uBAArCG,oBAEM;;IAFDhB,EAAE,EAAC,cAAc;IAAuBsB,OAAK,qDAAOT,kBAAW;wDAGvCA,eAAQ,IAAIA,aAAM,CAACW,MAAM,sBAAtDR,oBAEM;;IAFDhB,EAAE,EAAC,cAAc;IAAuCsB,OAAK,qDAAOT,kBAAW;wDAGpFd,oBAA4B;IAAtBE,GAAG,EAAEY,aAAM;IAAEX,GAAG,EAAC","names":["_createElementVNode","id","src","alt","title","_hoisted_10","_hoisted_12","_createCommentVNode","_hoisted_1","_hoisted_2","type","accept","multiple","onChange","$setup","$event","_hoisted_4","_createElementBlock","_Fragment","item","index","key","_hoisted_6","onClick","_hoisted_9","length"],"sourceRoot":"","sources":["/app/src/App.vue"],"sourcesContent":["<template>\n  <!-- 上传后显示 -->\n  <div id=\"title\">\n    <h1>義大胸腔科</h1>\n  </div>\n  <!-- 上传图片按钮 -->\n  <div id=\"demo\" v-show=\"uploadnum\">\n    <input type=\"file\" id=\"demo_file\" accept=\"image/*\" multiple @change=\"update($event)\" />\n    DRAG & DROP <br />\n    KKKgfdrhtgyrasdasdsadsadas\n  </div>\n  <div id=\"look\">\n    <div id=\"look_img\" v-for=\"(item, index) in imgSrc\" :key=\"index\">\n      <img :src=\"item\" alt=\"\" />\n      <div id=\"look_event\">\n        <img src=\"https://s1.ax1x.com/2022/08/08/vMEtPO.png\" alt=\"\" title=\"点击查看\" @click=\"look(index)\" />\n        <img src=\"https://s1.ax1x.com/2022/08/08/vMEaxH.png\" alt=\"\" title=\"点击删除\" @click=\"deletes(index)\" />\n      </div>\n    </div>\n  </div>\n\n  <!-- 图片预览 -->\n  <div id=\"preview\" v-if=\"show\" @click=\"\n    () => {\n      show = false;\n    }\n  \">\n    <div id=\"preview_close\">\n      <img src=\"https://s1.ax1x.com/2022/08/08/vMEURe.png\" alt=\"\" title=\"关闭\" @click=\"\n        () => {\n          show = false;\n        }\n      \" />\n    </div>\n    <div id=\"preview_last\" v-if=\"pvwWhere != 0\" @click.stop=\"previewLast()\">\n      <img src=\"https://s1.ax1x.com/2022/08/08/vMEBqI.png\" alt=\"\" title=\"上一张\" />\n    </div>\n    <div id=\"preview_next\" v-if=\"pvwWhere != imgSrc.length - 1\" @click.stop=\"previewNext()\">\n      <img src=\"https://s1.ax1x.com/2022/08/08/vMErZt.png\" alt=\"\" title=\"下一张\" />\n    </div>\n    <img :src=\"pvwSrc\" alt=\"\" />\n  </div>\n</template>\n\n<script>\nimport { ref } from \"vue\";\n\nexport default {\n  setup() {\n    const imgSrc = ref([]); //已上传图片数组\n    const arrLength = ref(10000); //上传图片数量\n    const uploadnum = ref(true); //控制上传按钮的显示隐藏\n    const show = ref(false); //控制预览图片遮罩层显示隐藏\n    const pvwSrc = ref(null); //预览图片地址\n    const pvwWhere = ref(0); //选择哪一张进行预览以及控制上一张下一张\n\n    const update = (e) => {\n      let file = e.target.files;\n      console.log(\"file\", file);\n      if (file) {\n        let filesLength = arrLength.value - imgSrc.value.length;\n        for (let i = 0; i < filesLength; i++) {\n          let img = new FileReader();\n\n          img.onloadend = ({ target }) => {\n            imgSrc.value.push(target.result); //将img转化为二进制数据\n            console.log(\"target\", target.result);\n            console.log(\"upload success!!\");\n            panduan();\n          };\n          img.readAsDataURL(file[i]);\n        }\n      }\n    };\n    //判断照片数量是否满足规定数量；满足则隐藏上传按钮\n    const panduan = () => {\n      if (imgSrc.value.length >= arrLength.value) {\n        uploadnum.value = false;\n      } else {\n        uploadnum.value = true;\n      }\n    };\n    panduan();\n    //删除图片\n    const deletes = (i) => {\n      imgSrc.value.splice(i, 1);\n      panduan();\n    };\n    //图片预览\n    const look = (i) => {\n      console.log(imgSrc.value);\n      pvwWhere.value = i;\n      show.value = true;\n      pvwSrc.value = imgSrc.value[pvwWhere.value];\n      console.log(\"image:\", pvwSrc);\n    };\n    //预览：上一张功能\n    const previewLast = () => {\n      pvwWhere.value--;\n      pvwSrc.value = imgSrc.value[pvwWhere.value];\n    };\n    //预览：下一张功能\n    const previewNext = () => {\n      pvwWhere.value++;\n      pvwSrc.value = imgSrc.value[pvwWhere.value];\n    };\n    return {\n      update,\n      imgSrc,\n      arrLength,\n      uploadnum,\n      deletes,\n      look,\n      show,\n      pvwSrc,\n      pvwWhere,\n      previewLast,\n      previewNext,\n    };\n  },\n};\n</script>\n\n<style>\n#demo {\n  width: 20vh;\n  height: 20vh;\n  position: relative;\n  border: 3px dashed #dcdcdc;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-left: 1em;\n  margin-top: 1em;\n}\n\n#demo_file {\n  opacity: 0;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n}\n\n#demo_img {\n  display: block;\n  width: 50%;\n  height: 50%;\n}\n\n#look {\n  width: 70vh;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: left;\n  align-items: center;\n}\n\n#look_img {\n  width: 20vh;\n  height: 20vh;\n  margin-left: 1em;\n  margin-top: 1em;\n  display: flex;\n  justify-content: space-around;\n}\n\n#look_img img {\n  display: block;\n  width: 20vh;\n  height: 20vh;\n  cursor: pointer;\n}\n\n#look_event {\n  background: rgba(0, 0, 0, 0.6);\n  width: 20vh;\n  height: 0px;\n  position: absolute;\n  transition: 1s;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n#look_event img {\n  display: block;\n  width: 2em;\n  height: 0em;\n  cursor: pointer;\n}\n\n#look_img:hover #look_event {\n  height: 20vh;\n  /* opacity: 50%; */\n}\n\n#look_img:hover #look_event>img {\n  height: 2em;\n}\n\n#preview {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.8);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n#preview img {\n  width: 40%;\n}\n\n#preview_close {\n  position: absolute;\n  top: 4vh;\n  right: 0;\n  display: flex;\n  justify-content: center;\n}\n\n#preview_last {\n  position: absolute;\n  left: 0;\n  top: 50%;\n  display: flex;\n  justify-content: center;\n}\n\n#preview_next {\n  position: absolute;\n  right: 0;\n  top: 50%;\n  display: flex;\n  justify-content: center;\n}\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}