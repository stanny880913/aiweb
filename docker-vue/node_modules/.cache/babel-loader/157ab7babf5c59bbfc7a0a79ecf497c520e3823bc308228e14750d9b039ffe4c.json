{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref } from \"vue\";\nexport default {\n  setup() {\n    const imgSrc = ref([]); //已上传图片数组\n    const arrLength = ref(10000); //上传图片数量\n    const uploadnum = ref(true); //控制上传按钮的显示隐藏\n    const show = ref(false); //控制预览图片遮罩层显示隐藏\n    const pvwSrc = ref(null); //预览图片地址\n    const pvwWhere = ref(0); //选择哪一张进行预览以及控制上一张下一张\n\n    const update = e => {\n      let file = e.target.files;\n      console.log(\"file\", file);\n      if (file) {\n        let filesLength = arrLength.value - imgSrc.value.length;\n        for (let i = 0; i < filesLength; i++) {\n          let img = new FileReader();\n          img.onloadend = ({\n            target\n          }) => {\n            imgSrc.value.push(target.result); //将img转化为二进制数据\n            console.log(\"target\", target.result);\n            console.log(\"upload success!!\");\n            panduan();\n          };\n          img.readAsDataURL(file[i]);\n        }\n      }\n    };\n    //判断照片数量是否满足规定数量；满足则隐藏上传按钮\n    const panduan = () => {\n      if (imgSrc.value.length >= arrLength.value) {\n        uploadnum.value = false;\n      } else {\n        uploadnum.value = true;\n      }\n    };\n    panduan();\n    //删除图片\n    const deletes = i => {\n      imgSrc.value.splice(i, 1);\n      panduan();\n    };\n    //图片预览\n    const look = i => {\n      console.log(imgSrc.value);\n      pvwWhere.value = i;\n      show.value = true;\n      pvwSrc.value = imgSrc.value[pvwWhere.value];\n      console.log(\"image:\", pvwSrc);\n    };\n    //预览：上一张功能\n    const previewLast = () => {\n      pvwWhere.value--;\n      pvwSrc.value = imgSrc.value[pvwWhere.value];\n    };\n    //预览：下一张功能\n    const previewNext = () => {\n      pvwWhere.value++;\n      pvwSrc.value = imgSrc.value[pvwWhere.value];\n    };\n    return {\n      update,\n      imgSrc,\n      arrLength,\n      uploadnum,\n      deletes,\n      look,\n      show,\n      pvwSrc,\n      pvwWhere,\n      previewLast,\n      previewNext\n    };\n  }\n};","map":{"version":3,"mappings":"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","names":["ref","setup","imgSrc","arrLength","uploadnum","show","pvwSrc","pvwWhere","update","e","file","target","files","console","log","filesLength","value","length","i","img","FileReader","onloadend","push","result","panduan","readAsDataURL","deletes","splice","look","previewLast","previewNext"],"sourceRoot":"","sources":["/app/src/App.vue"],"sourcesContent":["<template>\n  <!-- 上传后显示 -->\n  <div id=\"title\">\n    <h1>義大胸腔科</h1>\n  </div>\n  <!-- 上传图片按钮 -->\n  <div id=\"demo\" v-show=\"uploadnum\">\n    <input type=\"file\" id=\"demo_file\" accept=\"image/*\" multiple @change=\"update($event)\" />\n    DRAG & DROP <br />\n    KKKgfdrhtgyrasdasdsadsadas\n  </div>\n  <div id=\"look\">\n    <div id=\"look_img\" v-for=\"(item, index) in imgSrc\" :key=\"index\">\n      <img :src=\"item\" alt=\"\" />\n      <div id=\"look_event\">\n        <img src=\"https://s1.ax1x.com/2022/08/08/vMEtPO.png\" alt=\"\" title=\"点击查看\" @click=\"look(index)\" />\n        <img src=\"https://s1.ax1x.com/2022/08/08/vMEaxH.png\" alt=\"\" title=\"点击删除\" @click=\"deletes(index)\" />\n      </div>\n    </div>\n  </div>\n\n  <!-- 图片预览 -->\n  <div id=\"preview\" v-if=\"show\" @click=\"\n    () => {\n      show = false;\n    }\n  \">\n    <div id=\"preview_close\">\n      <img src=\"https://s1.ax1x.com/2022/08/08/vMEURe.png\" alt=\"\" title=\"关闭\" @click=\"\n        () => {\n          show = false;\n        }\n      \" />\n    </div>\n    <div id=\"preview_last\" v-if=\"pvwWhere != 0\" @click.stop=\"previewLast()\">\n      <img src=\"https://s1.ax1x.com/2022/08/08/vMEBqI.png\" alt=\"\" title=\"上一张\" />\n    </div>\n    <div id=\"preview_next\" v-if=\"pvwWhere != imgSrc.length - 1\" @click.stop=\"previewNext()\">\n      <img src=\"https://s1.ax1x.com/2022/08/08/vMErZt.png\" alt=\"\" title=\"下一张\" />\n    </div>\n    <img :src=\"pvwSrc\" alt=\"\" />\n  </div>\n</template>\n\n<script>\nimport { ref } from \"vue\";\n\nexport default {\n  setup() {\n    const imgSrc = ref([]); //已上传图片数组\n    const arrLength = ref(10000); //上传图片数量\n    const uploadnum = ref(true); //控制上传按钮的显示隐藏\n    const show = ref(false); //控制预览图片遮罩层显示隐藏\n    const pvwSrc = ref(null); //预览图片地址\n    const pvwWhere = ref(0); //选择哪一张进行预览以及控制上一张下一张\n\n    const update = (e) => {\n      let file = e.target.files;\n      console.log(\"file\", file);\n      if (file) {\n        let filesLength = arrLength.value - imgSrc.value.length;\n        for (let i = 0; i < filesLength; i++) {\n          let img = new FileReader();\n\n          img.onloadend = ({ target }) => {\n            imgSrc.value.push(target.result); //将img转化为二进制数据\n            console.log(\"target\", target.result);\n            console.log(\"upload success!!\");\n            panduan();\n          };\n          img.readAsDataURL(file[i]);\n        }\n      }\n    };\n    //判断照片数量是否满足规定数量；满足则隐藏上传按钮\n    const panduan = () => {\n      if (imgSrc.value.length >= arrLength.value) {\n        uploadnum.value = false;\n      } else {\n        uploadnum.value = true;\n      }\n    };\n    panduan();\n    //删除图片\n    const deletes = (i) => {\n      imgSrc.value.splice(i, 1);\n      panduan();\n    };\n    //图片预览\n    const look = (i) => {\n      console.log(imgSrc.value);\n      pvwWhere.value = i;\n      show.value = true;\n      pvwSrc.value = imgSrc.value[pvwWhere.value];\n      console.log(\"image:\", pvwSrc);\n    };\n    //预览：上一张功能\n    const previewLast = () => {\n      pvwWhere.value--;\n      pvwSrc.value = imgSrc.value[pvwWhere.value];\n    };\n    //预览：下一张功能\n    const previewNext = () => {\n      pvwWhere.value++;\n      pvwSrc.value = imgSrc.value[pvwWhere.value];\n    };\n    return {\n      update,\n      imgSrc,\n      arrLength,\n      uploadnum,\n      deletes,\n      look,\n      show,\n      pvwSrc,\n      pvwWhere,\n      previewLast,\n      previewNext,\n    };\n  },\n};\n</script>\n\n<style>\n#demo {\n  width: 20vh;\n  height: 20vh;\n  position: relative;\n  border: 3px dashed #dcdcdc;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-left: 1em;\n  margin-top: 1em;\n}\n\n#demo_file {\n  opacity: 0;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n}\n\n#demo_img {\n  display: block;\n  width: 50%;\n  height: 50%;\n}\n\n#look {\n  width: 70vh;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: left;\n  align-items: center;\n}\n\n#look_img {\n  width: 20vh;\n  height: 20vh;\n  margin-left: 1em;\n  margin-top: 1em;\n  display: flex;\n  justify-content: space-around;\n}\n\n#look_img img {\n  display: block;\n  width: 20vh;\n  height: 20vh;\n  cursor: pointer;\n}\n\n#look_event {\n  background: rgba(0, 0, 0, 0.6);\n  width: 20vh;\n  height: 0px;\n  position: absolute;\n  transition: 1s;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n#look_event img {\n  display: block;\n  width: 2em;\n  height: 0em;\n  cursor: pointer;\n}\n\n#look_img:hover #look_event {\n  height: 20vh;\n  /* opacity: 50%; */\n}\n\n#look_img:hover #look_event>img {\n  height: 2em;\n}\n\n#preview {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.8);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n#preview img {\n  width: 40%;\n}\n\n#preview_close {\n  position: absolute;\n  top: 4vh;\n  right: 0;\n  display: flex;\n  justify-content: center;\n}\n\n#preview_last {\n  position: absolute;\n  left: 0;\n  top: 50%;\n  display: flex;\n  justify-content: center;\n}\n\n#preview_next {\n  position: absolute;\n  right: 0;\n  top: 50%;\n  display: flex;\n  justify-content: center;\n}\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}